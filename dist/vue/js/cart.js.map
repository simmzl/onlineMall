{"version":3,"sources":["../../../vue/js/cart.js"],"names":["Vue","el","data","totalMoney","totalQuantity","productList","checkedAll","filters","formatMoney","value","toFixed","mounted","$nextTick","cartView","methods","$http","get","then","res","body","result","list","forEach","item","checked","$set","getTotal","trClick","e","window","event","srcElement","target","cls","className","checkedQuantity","i","length","productQuantity","reduce","parentNode","childNodes","style","opacity","conf","confirm","index","indexOf","splice","inputQuantity","isNaN","firstElementChild","productPrice","checkALL","deleteAll","alert","addProduct","push"],"mappings":";;AAAA,IAAIA,GAAJ,CAAQ;AACJC,QAAG,MADC;AAEJC,UAAK;AACDC,oBAAW,CADV;AAEDC,uBAAc,CAFb;AAGDC,qBAAY,EAHX;AAIDC,oBAAW;AAJV,KAFD;AAQJC,aAAQ;AACJC,qBAAY,qBAAUC,KAAV,EAAiB;AACzB,mBAAO,MAAKA,MAAMC,OAAN,CAAc,CAAd,CAAZ;AACH;AAHG,KARJ;AAaJC,aAAQ,mBAAY;AAChB,aAAKC,SAAL,CAAe,YAAY;AACvB,iBAAKC,QAAL;AACH,SAFD;AAGH,KAjBG;AAkBJC,aAAQ;AACJD,kBAAW,oBAAY;AAAA;;AACnB,iBAAKE,KAAL,CAAWC,GAAX,CAAe,2BAAf,EAA4CC,IAA5C,CAAkD,eAAO;AACrD,sBAAKZ,WAAL,GAAmBa,IAAIC,IAAJ,CAASC,MAAT,CAAgBC,IAAnC;AACA,sBAAKhB,WAAL,CAAiBiB,OAAjB,CAA0B,UAACC,IAAD,EAAU;AAChC,2BAAOA,KAAKC,OAAZ,KAAwB,WAAxB,IAAuC,MAAKC,IAAL,CAAUF,IAAV,EAAgB,SAAhB,EAA2B,IAA3B,CAAvC;AACH,iBAFD;AAGA,sBAAKG,QAAL;AACH,aAND;AAOH,SATG;AAUJC,iBAAU,iBAAUC,CAAV,EAAYL,IAAZ,EAAkB;AAAA;;AACxBK,gBAAIA,KAAKC,OAAOC,KAAhB;AACA,gBAAI7B,KAAK2B,EAAEG,UAAF,IAAcH,EAAEI,MAAzB;AACA,gBAAIC,MAAMhC,GAAGiC,SAAb;AACA,gBAAIC,kBAAkB,CAAtB;AACA,oBAAQF,GAAR;AACI,qBAAK,OAAL;AACI;AACAhC,uBAAGuB,OAAH,KAAe,IAAf,GAAsBD,KAAKC,OAAL,GAAe,IAArC,GAA4CD,KAAKC,OAAL,GAAe,KAA3D;;AAEA,wBAAGD,KAAKC,OAAR,EAAgB;AACZ,6BAAKnB,WAAL,CAAiBiB,OAAjB,CAAyB,UAACc,CAAD,EAAM;AAC3B,6BAACA,EAAEZ,OAAH,GAAa,OAAKlB,UAAL,GAAkB,KAA/B,GAAuC6B,iBAAvC;AACH,yBAFD;AAGA,4BAAGA,oBAAoB,KAAK9B,WAAL,CAAiBgC,MAAxC,EAA+C;AAC3C,iCAAK/B,UAAL,GAAkB,IAAlB;AACH;AACJ,qBAPD,MAOM;AACF,6BAAKA,UAAL,GAAkB,KAAlB;AACH;AACD,yBAAKoB,QAAL;AACA;AACJ,qBAAK,QAAL;AACIH,yBAAKe,eAAL;AACA,wBAAIC,SAAStC,GAAGuC,UAAH,CAAcC,UAAd,CAAyB,CAAzB,CAAb;AACAF,2BAAOG,KAAP,CAAaC,OAAb,GAAuB,CAAvB;AACA,yBAAKjB,QAAL;AACA;AACJ,qBAAK,WAAL;AACI,wBAAGH,KAAKe,eAAL,GAAuB,CAA1B,EAA4B;AACxBf,6BAAKe,eAAL;AACH,qBAFD,MAEM,IAAGf,KAAKe,eAAL,GAAuB,CAA1B,EAA4B;AAC9Bf,6BAAKe,eAAL;AACArC,2BAAGyC,KAAH,CAASC,OAAT,GAAmB,GAAnB;AACH;AACD,yBAAKjB,QAAL;AACA;AACJ,qBAAK,QAAL;AACI,wBAAIkB,OAAOC,QAAQ,OAAR,CAAX;AACA,wBAAG,CAAC,CAACD,IAAL,EAAU;AACN,4BAAIE,QAAQ,KAAKzC,WAAL,CAAiB0C,OAAjB,CAAyBxB,IAAzB,CAAZ;AACA,6BAAKlB,WAAL,CAAiB2C,MAAjB,CAAwBF,KAAxB,EAA8B,CAA9B;AACA,6BAAKpB,QAAL;AACH;AACD;AAvCR;AAyCH,SAxDG;AAyDJuB,uBAAc,uBAAUrB,CAAV,EAAYL,IAAZ,EAAkB;AAC5B,gBAAGA,KAAKe,eAAL,IAAwB,CAAxB,IAA6BY,MAAM3B,KAAKe,eAAX,CAAhC,EAA4D;AACxDf,qBAAKe,eAAL,GAAuB,CAAvB;AACAV,kBAAEI,MAAF,CAASQ,UAAT,CAAoBW,iBAApB,CAAsCT,KAAtC,CAA4CC,OAA5C,GAAsD,GAAtD;AACH,aAHD,MAGM,IAAIpB,KAAKe,eAAL,GAAuB,CAA3B,EAA6B;AAC/BV,kBAAEI,MAAF,CAASQ,UAAT,CAAoBW,iBAApB,CAAsCT,KAAtC,CAA4CC,OAA5C,GAAsD,CAAtD;AACH,aAFK,MAEA;AACFf,kBAAEI,MAAF,CAASQ,UAAT,CAAoBW,iBAApB,CAAsCT,KAAtC,CAA4CC,OAA5C,GAAsD,GAAtD;AACH;AACJ,SAlEG;AAmEJjB,kBAAW,oBAAY;AAAA;;AACnB,iBAAKvB,UAAL,GAAkB,CAAlB;AACA,iBAAKC,aAAL,GAAqB,CAArB;AACA,iBAAKC,WAAL,CAAiBiB,OAAjB,CAAyB,UAACC,IAAD,EAAS;AAC9B,oBAAIA,KAAKC,OAAT,EAAkB;AACd,2BAAKpB,aAAL,IAAqBmB,KAAKe,eAA1B;AACA,2BAAKnC,UAAL,IAAmBoB,KAAK6B,YAAL,GAAoB7B,KAAKe,eAA5C;AACH;AACJ,aALD;AAMH,SA5EG;AA6EJe,kBAAW,oBAAY;AACnB,gBAAI,KAAK/C,UAAL,KAAoB,IAAxB,EAA6B;AACzB,qBAAKD,WAAL,CAAiBiB,OAAjB,CAAyB,UAACC,IAAD,EAAS;AAC9BA,yBAAKC,OAAL,GAAgB,IAAhB;AACH,iBAFD;AAGA,qBAAKE,QAAL;AACH,aALD,MAKM;AACF,qBAAKrB,WAAL,CAAiBiB,OAAjB,CAAyB,UAACC,IAAD,EAAS;AAC9BA,yBAAKC,OAAL,GAAgB,KAAhB;AACH,iBAFD;AAGA,qBAAKrB,UAAL,GAAkB,CAAlB;AACA,qBAAKC,aAAL,GAAqB,CAArB;AACH;AACJ,SA1FG;AA2FJkD,mBAAW,qBAAY;AAAA;;AACnB,gBAAInB,kBAAkB,CAAtB;AACA,iBAAK9B,WAAL,CAAiBiB,OAAjB,CAAyB,UAACc,CAAD,EAAM;AAC3B,iBAACA,EAAEZ,OAAH,GAAa,OAAKlB,UAAL,GAAkB,KAA/B,GAAuC6B,iBAAvC;AACH,aAFD;AAGA,gBAAGA,oBAAoB,CAAvB,EAAyB;AACrBoB,sBAAM,QAAN;AACA;AACH;AACD,gBAAIX,OAAOC,QAAQ,OAAR,CAAX;AACA,gBAAG,CAAC,CAACD,IAAL,EAAU;AACN,qBAAKtC,UAAL,GAAkB,KAAlB;AACA,qBAAKF,aAAL,GAAqB,CAArB;AACA,qBAAKD,UAAL,GAAkB,CAAlB;AACA,qBAAI,IAAIiC,IAAE,CAAV,EAAYA,IAAE,KAAK/B,WAAL,CAAiBgC,MAA/B,EAAsCD,GAAtC,EAA0C;AACtC,wBAAG,KAAK/B,WAAL,CAAiB+B,CAAjB,EAAoBZ,OAApB,KAAiC,IAApC,EAAyC;AACrC,6BAAKnB,WAAL,CAAiB2C,MAAjB,CAAwBZ,CAAxB,EAA0B,CAA1B;AACAA;AACH;AACJ;AACJ;AACJ,SAhHG;AAiHJoB,oBAAY,sBAAY;AAAA;;AACpB,iBAAKzC,KAAL,CAAWC,GAAX,CAAe,0BAAf,EAA2CC,IAA3C,CAAiD,eAAO;AACpD,oBAAIG,SAASF,IAAIC,IAAJ,CAASC,MAAT,CAAgBC,IAA7B;AACAD,uBAAOE,OAAP,CAAgB,UAACC,IAAD,EAAU;AACtB,2BAAOA,KAAKC,OAAZ,KAAwB,WAAxB,IAAuC,OAAKC,IAAL,CAAUF,IAAV,EAAgB,SAAhB,EAA2B,IAA3B,CAAvC;AACA,2BAAKlB,WAAL,CAAiBoD,IAAjB,CAAsBlC,IAAtB;AACA,2BAAKG,QAAL;AACH,iBAJD;AAKH,aAPD;AAQH;AA1HG;AAlBJ,CAAR","file":"cart.js","sourcesContent":["new Vue({\r\n    el:'#app',\r\n    data:{\r\n        totalMoney:0,\r\n        totalQuantity:0,\r\n        productList:[],\r\n        checkedAll:true\r\n    },\r\n    filters:{\r\n        formatMoney:function (value) {\r\n            return '￥'+ value.toFixed(2);\r\n        }\r\n    },\r\n    mounted:function () {\r\n        this.$nextTick(function () {\r\n            this.cartView();\r\n        });\r\n    },\r\n    methods:{\r\n        cartView : function () {\r\n            this.$http.get('../vue/data/cartData.json').then( res => {\r\n                this.productList = res.body.result.list;\r\n                this.productList.forEach( (item) => {\r\n                    typeof item.checked === 'undefined' && this.$set(item, \"checked\", true);\r\n                });\r\n                this.getTotal();\r\n            });\r\n        },\r\n        trClick : function (e,item) {\r\n            e = e || window.event;\r\n            let el = e.srcElement||e.target;\r\n            let cls = el.className;\r\n            let checkedQuantity = 0;\r\n            switch (cls) {\r\n                case \"check\":\r\n                    // typeof item.checked === 'undefined' && this.$set(item, \"checked\", false);\r\n                    el.checked === true ? item.checked = true : item.checked = false;\r\n\r\n                    if(item.checked){\r\n                        this.productList.forEach((i) =>{\r\n                            !i.checked ? this.checkedAll = false : checkedQuantity++;\r\n                        });\r\n                        if(checkedQuantity === this.productList.length){\r\n                            this.checkedAll = true;\r\n                        }\r\n                    }else {\r\n                        this.checkedAll = false;\r\n                    }\r\n                    this.getTotal();\r\n                    break;\r\n                case \"add fl\":\r\n                    item.productQuantity ++;\r\n                    let reduce = el.parentNode.childNodes[0];\r\n                    reduce.style.opacity = 1;\r\n                    this.getTotal();\r\n                    break;\r\n                case \"reduce fl\":\r\n                    if(item.productQuantity > 2){\r\n                        item.productQuantity -- ;\r\n                    }else if(item.productQuantity = 2){\r\n                        item.productQuantity -- ;\r\n                        el.style.opacity = 0.1;\r\n                    }\r\n                    this.getTotal();\r\n                    break;\r\n                case \"delete\":\r\n                    let conf = confirm(\"确认删除？\");\r\n                    if(!!conf){\r\n                        let index = this.productList.indexOf(item);\r\n                        this.productList.splice(index,1);\r\n                        this.getTotal();\r\n                    }\r\n                    break;\r\n            }\r\n        },\r\n        inputQuantity:function (e,item) {\r\n            if(item.productQuantity <= 0 || isNaN(item.productQuantity)){\r\n                item.productQuantity = 1;\r\n                e.target.parentNode.firstElementChild.style.opacity = 0.1;\r\n            }else if (item.productQuantity > 1){\r\n                e.target.parentNode.firstElementChild.style.opacity = 1;\r\n            }else {\r\n                e.target.parentNode.firstElementChild.style.opacity = 0.1;\r\n            }\r\n        },\r\n        getTotal : function () {\r\n            this.totalMoney = 0;\r\n            this.totalQuantity = 0;\r\n            this.productList.forEach((item) =>{\r\n                if (item.checked) {\r\n                    this.totalQuantity +=item.productQuantity;\r\n                    this.totalMoney += item.productPrice * item.productQuantity;\r\n                }\r\n            });\r\n        },\r\n        checkALL : function () {\r\n            if (this.checkedAll === true){\r\n                this.productList.forEach((item) =>{\r\n                    item.checked  = true;\r\n                });\r\n                this.getTotal();\r\n            }else {\r\n                this.productList.forEach((item) =>{\r\n                    item.checked  = false;\r\n                });\r\n                this.totalMoney = 0;\r\n                this.totalQuantity = 0;\r\n            }\r\n        },\r\n        deleteAll :function () {\r\n            let checkedQuantity = 0;\r\n            this.productList.forEach((i) =>{\r\n                !i.checked ? this.checkedAll = false : checkedQuantity++;\r\n            });\r\n            if(checkedQuantity === 0){\r\n                alert('请选择商品！');\r\n                return;\r\n            }\r\n            let conf = confirm(\"确认删除？\");\r\n            if(!!conf){\r\n                this.checkedAll = false;\r\n                this.totalQuantity = 0;\r\n                this.totalMoney = 0;\r\n                for(let i=0;i<this.productList.length;i++){\r\n                    if(this.productList[i].checked  === true){\r\n                        this.productList.splice(i,1);\r\n                        i--;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        addProduct :function () {\r\n            this.$http.get('../vue/data/addData.json').then( res => {\r\n                let result = res.body.result.list;\r\n                result.forEach( (item) => {\r\n                    typeof item.checked === 'undefined' && this.$set(item, \"checked\", true);\r\n                    this.productList.push(item);\r\n                    this.getTotal();\r\n                });\r\n            })\r\n        }\r\n    }\r\n});"]}